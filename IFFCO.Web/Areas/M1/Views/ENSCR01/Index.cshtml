@model IFFCO.VTMS.Web.ViewModels.ENSCR01ViewModel
@*@{
    Layout = "~/Views/Shared/_Layout.cshtml";
} *@

<script src="~/js/Common.js"></script>
<script type="text/javascript">
    $(".modalLoader").hide();   
</script>


<div class="plcholder-cn">

    <div class="table-responsive">
        <div class="table-area">
            <div class="table-title">
               @* <div class="btn-area-tbl">

                </div>*@
            </div>
            <div class="table-wrapper">

                <div class="table-con">
                    <div class="tableUp">
                        @*<div class="pd-form-area">*@
                        <div class="content-box">
                             <h3 class="sub-heading1">
                            <span class="glyphicon glyphicon-hand-right">  Report : List/Count of Trainees/Applicants </span>
                            </h3>
                            <div class="m-form">
                            <form asp-area="M1" asp-controller="ENSCR01"  asp-action="GetReportQueryDetail" method="get" ;>  @*onsubmit="return Validate()*@
                          
                                <div class="m-form">
                                    <div class="m-form-bx">
                                        <div class="row form-sm">

                                            <div class="col-sm-1 col-md-2">
                                                <div>
                                                   <label class="m-lbl1 m-lbl2">From Date<span style="color:red">*</span></label>
                                                </div>
                                            </div>
                                            <div class="col-sm-2 col-md-2">
                                                <div>
                                                        <input id="FFromDate" type="date" class="form-control datetime" required asp-for="@Model.VtStartDate" />
                                                    </div>
                                             </div>
                                             <div class="col-sm-2 col-md-2">
                                                    <div>
                                                        <label class="m-lbl1 m-lbl2"> TO Date<span style="color:red">*</span> </label>
                                                    </div>
                                             </div>
                                             <div class="col-sm-2 col-md-2">
                                                <div>
                                                    <input id="FToDate" type="date" class="form-control"  required asp-for="@Model.VtEndDate" />

                                                </div>
                                             </div>
                                              <div class="col-sm-2 col-md-2">
                                                    <div>
                                                        <label class="m-lbl1 m-lbl2"> Course </label>
                                                    </div>
                                             </div>
                                             <div class="col-sm-2 col-md-2">
                                                <div>
                                                    <select id="FCourse" onchange="PopBranchLOV()" asp-for="@Model.Msts.CourseName"  class="form-control" asp-items="@(new SelectList(ViewBag.CourseList,"Value","Text")) ">
                                                            <option value="">--Select Course--</option>
                                                     </select>
                                                </div>
                                             </div>
                                              <div class="col-sm-2 col-md-2">
                                                    <div>
                                                        <label class="m-lbl1 m-lbl2"> Branch </label>
                                                    </div>
                                             </div>
                                             <div class="col-sm-2 col-md-2">
                                                <div>
                                                    <select id="FBranch" asp-for="@Model.Msts.BranchName" class="form-control" asp-items="@(new SelectList(ViewBag.CourseList,"Value","Text")) ">
                                                        <option value="">--Select Course--</option>
                                                    </select>
                                                </div>
                                             </div>
                                              <div class="col-sm-2 col-md-2">
                                                    <div>
                                                        <label class="m-lbl1 m-lbl2"> State </label>
                                                    </div>
                                             </div>
                                             <div class="col-sm-2 col-md-2">
                                                <div>
                                                    <select id="FState" class="form-control" style="width:100%" onchange="PopDistrictLOV()" asp-for="@Model.Msts.StateName" asp-items="@(new SelectList(ViewBag.StateList,"Value","Text")) ">
                                                         <option value="">--Select--</option>
                                                    </select>

                                                </div>
                                             </div>
                                              <div class="col-sm-2 col-md-2">
                                                    <div>
                                                        <label class="m-lbl1 m-lbl2"> District </label>
                                                    </div>
                                             </div>
                                             <div class="col-sm-2 col-md-2">
                                                <div>
                                                     <select id="FDistrict" class="form-control" onchange="PopUniversityLOV()" asp-for="@Model.Msts.DistrictName">
                                                        <option value="">Select a District </option>
                                                    </select>
                                                </div>
                                             </div>
                                             <div class="col-sm-2 col-md-2">
                                                    <div>
                                                        <label class="m-lbl1 m-lbl2"> University </label>
                                                    </div>
                                             </div>
                                             <div class="col-sm-2 col-md-2">
                                                <div>
                                                     <select id="FUniversityName"  onclick="PopInstituteLOV()" asp-for="@Model.Msts.UniversityName" class="form-control"> @*asp-items="@(new SelectList(ViewBag.UniversityList,"Value","Text"))"*@
                                                        <option value="">--Select University--</option>
                                                    </select>
                                                </div>
                                             </div>
                                              <div class="col-sm-2 col-md-2">
                                                    <div>
                                                        <label class="m-lbl1 m-lbl2"> Institute </label>
                                                    </div>
                                             </div>
                                             <div class="col-sm-2 col-md-2">
                                                <div>
                                                     <select id="FInstitute" asp-for="@Model.Msts.InstituteName" class="form-control">
                                                        <option value="">--Select University--</option>
                                                    </select>
                                                </div>
                                             </div>
                                            
                                             
                                              <div class="col-sm-2 col-md-2">
                                                    <div>
                                                        <label class="m-lbl1 m-lbl2" id="FOthersRecommNameLabel"> Recommendation Type </label>
                                                    </div>
                                             </div>
                                             <div class="col-sm-2 col-md-2">
                                                <div>
                                                         <select id="Frecommendation" asp-for="@Model.Msts.RecommendationType" class="form-control">
                                                            <option value="IFFCO" selected>IFFCO Employee</option>
                                                            <option value="OTHERS">Others</option>
                                                           
                                                        </select>
                                                    
                                                </div>
                                             </div>
                                              <div class="col-sm-2 col-md-2">
                                                    <div>
                                                        <label class="m-lbl1 m-lbl2" id="FRecommPnoLabel"> Personnel No. </label>
                                                    </div>
                                               </div> 
                                               <div class="col-sm-2 col-md-2">
                                                   <div>
                                                        <input id="FRecommPno" maxlength="6" type="number" asp-for="@Model.RecommPno" class="form-control" />
                                                   </div>

                                               </div>

                                             <div class="col-sm-2 col-md-2">
                                                    <div>
                                                        <label class="m-lbl1 m-lbl2" id="OthersRecomLabel" hidden> Others Name </label>
                                                    </div>
                                             </div>
                                             <div class="col-sm-2 col-md-2">
                                                <div>
                                                   
                                                    <select id="OthersRecommName" style="display: none;" asp-for="@Model.OthersRecommName" class="form-control" asp-items="@(new SelectList(ViewBag.RecommList,"Value","Text")) ">
                                                        <option value="">--Select--</option>
                                                    </select>
                                                </div>
                                             </div>
                                             <div class="col-sm-2 col-md-2">
                                                    <div>
                                                        <label class="m-lbl1 m-lbl2"> Enrollment Status </label>
                                                    </div>
                                             </div>
                                             <div class="col-sm-2 col-md-2">
                                                <div>
                                                  <select id="FEnrollStatus" asp-for="@Model.Msts.StatusDesc" class="form-control" asp-items="@(new SelectList(ViewBag.Status,"Value","Text"))">
                                                    <option value="">--Select--</option>
                                                </select>
                                                </div>
                                             </div>

                                              <div class="col-sm-2 col-md-2">
                                                    <div>
                                                        <label class="m-lbl1 m-lbl2"> Report Type </label>
                                                    </div>
                                             </div>
                                             <div class="col-sm-2 col-md-2">
                                                <div>
                                                 <select id="FReportType" asp-for="@Model.ReportType" class="form-control" required>
                                                    <option value="ListOfTrainee">List of Vocational Trainees/Applicants</option>
                                                    <option value="CountOfCourseTrainee">Count of Course-Wise Enrolled Trainees</option>
                                                    <option value="CountOfBranchTrainee">Count of Branch-Wise Enrolled Trainees</option>
                                                    <option value="CountOfInstituteTrainee">Count of Institute-Wise Enrolled Trainees</option>
                                                    <option value="CountOfRecommendationTrainee">Count of Recommendation-Wise Enrolled Trainees</option>
                                                </select>
                                                </div>
                                             </div>
                                         </div>
                                        </div>
                                        <div class="btn-area1">
                                            <input type="submit" id="save" onclick="GetReportQueryDetail" class="m-btn-1 save" value="Query" />
                                            <input type="reset" id="save" class="m-btn-1 btn-warning" value="Reset" />

                                        </div>
                                    </div>
                                </form>
                            </div>



                             <table class="table table-striped table-hover" id="HrmsHrdGrid">
                                <thead>
                                    <tr>
                                       
                                       @* <th>
                                           TRAINING PERIOD
                                        </th>*@
                                       
                                        <th>
                                            VT CODE
                                        </th>
                                        <th>
                                            COURSE
                                        </th>
                                         <th>
                                            INSTITUTE
                                        </th>
                                        <th>
                                            ACTIONS
                                        </th>
                                    </tr>
                                 </thead>
                                   <tbody>
                      
                     @if(Model.List_msts != null) 
                     {     
                    foreach (var item in Model.List_msts)
                    {
                        <tr>
                           @* <td>
                                @Html.DisplayFor(modelItem => item.)
                            </td>*@
                           <td>
                                @Html.DisplayFor(modelItem => item.Vtcode)
                            </td>
                            <td>
                                  @Html.DisplayFor(modelItem => item.COURSE_DESC) - @Html.DisplayFor(modelItem => item.BRANCH_DESC)
                            </td>
                             <td>
                                  @Html.DisplayFor(modelItem => item.UniversityName) - @Html.DisplayFor(modelItem => item.InstituteName)
                            </td>
                            <td style=" width: 32%;">

                                <input type="button" class="btn btn-danger btnSelect" value="Applicant Form" />
                               @* <a asp-area="M1" asp-controller="ENSCR01" asp-action="Create" asp-route-id="@item.Vtcode" class="Create" data-toggle="modal"><input type="button"  onclick="GetIndex('M1/ENSCR01/Create')" class="btn btn-success"  /></a>*@
                                <a asp-area="M1" asp-controller="ENSCR01" asp-action="Details" asp-route-id="@item.Vtcode" class="Details" data-toggle="modal"><input type="button" class="btn btn-success" value="Details"> </a>

                             </td>
                        </tr>
                      }
                    }
                            </tbody>
                            </table>

                        </div>
                      @*</div>*@
                  </div>
               </div>
             </div>
          </div> 
        </div>
      </div>
                     

                       
  <div id="commonModalbinder" class="modal" style="display:none!important;z-index:99999999 !important;"></div>                    
                          

         <script type="text/javascript">
              $("#Frecommendation").change(function () {
                if ($("#Frecommendation option:selected").val() == 'OTHERS') {
                    $('#FRecommPno').hide();
                    $('#FRecommPnoLabel').hide();   
                    $('#RecomNm').hide();
                    $('#RecommPno').hide();
                    $('#OthersRecomLabel').show();
                    $('#OthersRecommName').show();
            }
                else {
                    $('#FRecommPno').show();
                    $('#FRecommPnoLabel').show(); 
                    $('#OthersRecomLabel').hide();
                    $('#OthersRecommName').hide();
            }
            ;
            });

            $(document).ready(function () {
            $('#FUniversityName').select2();
            $('#FState').select2();
            $('#FCourse').select2();
            $('#FBranch').select2();
            $('#FInstitute').select2();
            $('#FDistrict').select2();

    });
           
         function PopDistrictLOV() {
                debugger;
                $(".modalLoader").css("display", "block");
                setTimeout(function () {
                    CommonAjax('/M1/ENSCR01/DistrictLOVBindJSON', "GET", false, "application/json", false, BindDropDownWithSelectAsNull, "#FDistrict", { StateCd: $('#FState').val() });
           
                    $(".modalLoader").hide();
                }, 10);
               }

                function PopUniversityLOV() {
                debugger;
                $(".modalLoader").css("display", "block");
                setTimeout(function () {
                    CommonAjax('/M1/ENSCR01/UniversityLOVBindJSON', "GET", false, "application/json", false, BindDropDownWithSelectAsNull, "#FUniversityName", { DistrictName: $('#FDistrict').val() });
           
                    $(".modalLoader").hide();
                }, 10);
               }

                function PopBranchLOV() {
                    debugger;
                    $(".modalLoader").css("display", "block");
                    setTimeout(function() {
                        CommonAjax('/M1/ENSCR01/BranchLOVBindJSON', "GET", false, "application/json", false, BindDropDownWithSelectAsNull, "#FBranch", { CourseCode: $('#FCourse').val() });

                        $(".modalLoader").hide();
                    }, 10);
                }

    
                 function PopInstituteLOV() {
                    debugger;
                    $(".modalLoader").css("display", "block");
                    setTimeout(function() {
                        CommonAjax('/M1/ENSCR01/InstituteLOVBindJSON', "GET", false, "application/json", false, BindDropDownWithSelectAsNull, "#FInstitute", { UniversityId: $('#FUniversityName').val() });

                        $(".modalLoader").hide();
                    }, 10);
                }

                //Ajax for table
               function PopReportList() {
                    debugger;
                    $(".modalLoader").css("display", "block");
                    setTimeout(function () {
                        CommonAjax('/M1/ENSCR01/GetFormQuery', "GET", false, "application/json", false, EchitBind, {FromDate: $('#FFromDate').val(), ToDate: $('#FToDate').val(), Course: $('#FCourse').val(), Branch: $('#FCourse').val(), University: $("#FUniversityName").val(), Institute: $("#FInstitute").val(), Recommendation: $('#Frecommendation').val(), PersonalNo: $('#FRecommPno').val(), RecommenderName: $('#FOthersRecommName'), Enroll: $('#FEnrollStatus').val(), ReportType: $('#FReportType') });
                        //$("#RoadDILOV").select2();
                        $(".modalLoader").hide();
                    }, 10);
                }


        </script>